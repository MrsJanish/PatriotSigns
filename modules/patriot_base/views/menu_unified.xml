<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- 
        UNIFIED PATRIOT SIGNS MENU - ROOT STRUCTURE
        
        This file only defines the ROOT menu and items that use models available
        in patriot_base or earlier modules (crm, project, hr).
        
        Other modules will add their menu items under this structure.
    -->

    <!-- ========================================================================= -->
    <!-- ROOT MENU - PATRIOT SIGNS                                                 -->
    <!-- ========================================================================= -->
    <menuitem id="menu_patriot_root"
              name="Patriot Signs"
              web_icon="patriot_base,static/description/icon.png"
              sequence="5"/>

    <!-- ========================================================================= -->
    <!-- 1. BID OPPORTUNITIES (ðŸ“§) - Uses crm.lead (available)                     -->
    <!-- ========================================================================= -->
    <menuitem id="menu_bid_opportunities"
              name="ðŸ“§ Bid Opportunities"
              parent="menu_patriot_root"
              sequence="10"/>

    <!-- Pipeline (Kanban) - Default view -->
    <record id="action_opportunities_pipeline" model="ir.actions.act_window">
        <field name="name">Opportunities Pipeline</field>
        <field name="res_model">crm.lead</field>
        <field name="view_mode">kanban,list,form</field>
        <field name="domain">[('type', '=', 'opportunity')]</field>
        <field name="context">{'default_type': 'opportunity'}</field>
    </record>
    <menuitem id="menu_opportunities_pipeline"
              name="Pipeline"
              parent="menu_bid_opportunities"
              action="action_opportunities_pipeline"
              sequence="10"/>

    <!-- Upcoming Bids -->
    <record id="action_upcoming_bids" model="ir.actions.act_window">
        <field name="name">Upcoming Bids</field>
        <field name="res_model">crm.lead</field>
        <field name="view_mode">list,kanban,form</field>
        <field name="domain">[('bid_date', '!=', False), ('bid_date', '&gt;=', context_today().strftime('%Y-%m-%d'))]</field>
        <field name="context">{'default_type': 'opportunity'}</field>
    </record>
    <menuitem id="menu_upcoming_bids"
              name="Upcoming Bids"
              parent="menu_bid_opportunities"
              action="action_upcoming_bids"
              sequence="20"/>

    <!-- ========================================================================= -->
    <!-- PLACEHOLDER MENUS - Will be populated by other modules                   -->
    <!-- ========================================================================= -->
    
    <menuitem id="menu_estimating"
              name="ðŸ“Š Estimating"
              parent="menu_patriot_root"
              sequence="20"/>
    
    <menuitem id="menu_won_projects"
              name="âœ… Won Projects"
              parent="menu_patriot_root"
              sequence="30"/>

    <!-- Active Projects - Uses project.project (available from project module) -->
    <record id="action_active_projects" model="ir.actions.act_window">
        <field name="name">Active Projects</field>
        <field name="res_model">project.project</field>
        <field name="view_mode">kanban,list,form</field>
        <field name="domain">[('active', '=', True)]</field>
    </record>
    <menuitem id="menu_active_projects"
              name="Active Projects"
              parent="menu_won_projects"
              action="action_active_projects"
              sequence="10"/>

    <menuitem id="menu_submittals"
              name="ðŸ“ Submittals"
              parent="menu_patriot_root"
              sequence="40"/>

    <menuitem id="menu_production"
              name="ðŸ­ Production"
              parent="menu_patriot_root"
              sequence="50"/>

    <menuitem id="menu_installation"
              name="ðŸ”§ Installation"
              parent="menu_patriot_root"
              sequence="60"/>

    <menuitem id="menu_billing"
              name="ðŸ’° Billing"
              parent="menu_patriot_root"
              sequence="70"/>

    <!-- ========================================================================= -->
    <!-- 8. CONFIGURATION (âš™ï¸) - Uses models available in patriot_base            -->
    <!-- ========================================================================= -->
    <menuitem id="menu_configuration"
              name="âš™ï¸ Configuration"
              parent="menu_patriot_root"
              groups="base.group_system"
              sequence="90"/>

    <!-- Sign Categories -->
    <menuitem id="menu_config_categories"
              name="Sign Categories"
              parent="menu_configuration"
              action="sign_category_action"
              sequence="10"/>

    <!-- Sign Subtypes -->
    <menuitem id="menu_config_subtypes"
              name="Sign Subtypes"
              parent="menu_configuration"
              action="sign_subtype_action"
              sequence="20"/>

    <!-- Dimensions -->
    <menuitem id="menu_config_dimensions"
              name="Dimensions"
              parent="menu_configuration"
              action="sign_dimension_action"
              sequence="30"/>

    <!-- Employees (link to HR) -->
    <record id="action_employees" model="ir.actions.act_window">
        <field name="name">Employees</field>
        <field name="res_model">hr.employee</field>
        <field name="view_mode">kanban,list,form</field>
    </record>
    <menuitem id="menu_config_employees"
              name="Employees"
              parent="menu_configuration"
              action="action_employees"
              sequence="40"/>

</odoo>
