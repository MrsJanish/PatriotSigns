<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- 1. INHERIT THE DEDICATED SALES ORDER LINE FORM (The Popup) -->
    <!-- This is safer than trying to xpath inside the main order form -->
    <!-- Note: In some versions, this ID might vary. 'sale.view_order_line_form' is standard. -->
    
    <!-- IF that view doesn't exist in Odoo 19 (rare), fallback to inline generic form -->
    <!-- Checking recent Odoo versions, 'sale.sale_order_line_view_form_readonly' exists but the editable one is usually defined inline or as 'view_order_line_form2' -->
    
    <!-- Let's try to target the Main Order Form again but using the most simplified path possible for Tree -->
    <!-- And for Form, we will try to create a new view for 'sale.order.line' if we can't find the parent -->
    
    <!-- Actually, let's strictly comment out the failing parts and ONLY do what worked locally in testing previously or standard practice -->
    <!-- Standard practice: Inherit 'sale.view_order_form' and xpath field[@name='order_line']/tree -->
    <!-- Since that failed 4 times, we will SKIP the tree view columns for now to ensure stability. -->
    <!-- We will focus on the FORM view. -->
    
    <!-- RE-ATTEMPT FORM INJECTION with simplified XPATH -->
    
    <record id="view_order_form_inherit_panel" model="ir.ui.view">
        <field name="name">sale.order.form.inherit.panel</field>
        <field name="model">sale.order</field>
        <field name="inherit_id" ref="sale.view_order_form"/>
        <field name="arch" type="xml">
            
            <!-- 
                TREE VIEW: DISABLED until we can inspect the view source interactively.
                Users can still click the line to edit params.
            -->
            
            <!-- 
                FORM VIEW: 
                The error said: Element '<xpath expr="//field[@name='order_line']/form//sheet">' cannot be located
                This means the inline form does NOT have a sheet. It's likely just a group or div.
                
                Let's use 'position="inside"' on the FORM tag itself.
            -->
            <xpath expr="//field[@name='order_line']/form" position="inside">
                 <group string="Panel Configuration">
                    <group>
                        <field name="panel_width"/>
                        <field name="panel_height"/>
                        <field name="panel_material"/>
                        <field name="panel_thickness"/>
                    </group>
                    <group>
                         <field name="is_windowed"/>
                         <field name="window_height" invisible="not is_windowed"/>
                    </group>
                </group>
            </xpath>
        </field>
    </record>
</odoo>
