<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">

    <t t-name="patriot_timeclock.AISearch">
        <div class="ps_ai_search">
            <!-- Search Input -->
            <div class="ps_ai_search_input_container">
                <i class="fa fa-magic ps_ai_icon"/>
                <input type="text" 
                       t-ref="searchInput"
                       class="form-control ps_ai_input" 
                       placeholder="Search with AI: 'hospital fab', 'that signs job'..."
                       t-att-value="state.query"
                       t-on-input="onInputChange"
                       t-on-keydown="onKeyDown"/>
                <i t-if="state.loading" class="fa fa-spinner fa-spin ps_ai_loading"/>
            </div>

            <!-- Results -->
            <div t-if="state.results.length > 0" class="ps_ai_results">
                <t t-foreach="state.results" t-as="result" t-key="result.id + result.type">
                    <div t-att-class="'ps_ai_result' + (result_index === state.selectedIndex ? ' ps_selected' : '')"
                         t-on-click="() => this.selectResult(result)">
                        <div class="ps_ai_result_content">
                            <i t-att-class="'fa me-2 ' + (result.type === 'task' ? 'fa-tasks' : 'fa-folder')"/>
                            <span class="ps_ai_result_name" t-out="result.display"/>
                        </div>
                        <span t-att-class="'ps_ai_confidence ' + getConfidenceClass(result.confidence)">
                            <i t-att-class="'fa ' + getConfidenceIcon(result.confidence)"/>
                        </span>
                    </div>
                </t>
            </div>
            
            <!-- Error Message -->
            <div t-if="state.error" class="ps_ai_error alert alert-warning mt-2">
                <i class="fa fa-exclamation-triangle me-2"/>
                <t t-out="state.error"/>
            </div>
            
            <!-- No Results Message -->
            <div t-if="state.searched and state.results.length === 0 and !state.loading and !state.error" 
                 class="ps_ai_no_results">
                <i class="fa fa-search me-2"/>
                No matches found. Try different words.
            </div>
            
            <!-- Hint -->
            <div t-if="!state.searched and !state.loading and state.query.length === 0" 
                 class="ps_ai_hint">
                <small class="text-muted">
                    <i class="fa fa-lightbulb-o me-1"/>
                    Type naturally: project names, task types, or keywords
                </small>
            </div>
        </div>
    </t>

</templates>
